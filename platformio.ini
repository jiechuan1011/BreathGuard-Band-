; PlatformIO 项目配置文件
; 糖尿病初筛监测系统

[env:uno]
platform = atmelavr
board = uno              ; Arduino UNO R3 (与UNO使用相同配置)
framework = arduino

; 编译选项
build_flags = 
    -Wall
    -Wextra
    -I../system
    -I../drivers
    -I../algorithm
    -I../config
    -I../utils
    -Wl,--print-memory-usage    ; 显示详细内存使用报告
    ; 如果需要更多调试信息，取消下面的注释
    ; -DDEBUG=1

; 上传设置
upload_speed = 115200
monitor_speed = 115200

; 源文件过滤（确保所有.cpp文件都被编译，包括子目录）
build_src_filter = 
    +<*> 
    +<../system/*.cpp>
    +<../drivers/*.cpp>
    +<../algorithm/*.cpp>
    -<main_minimal.cpp>        ; 排除极简测试文件（避免多重定义setup/loop）
    -<.git/> 
    -<.svn/> 
    -<example/> 
    -<examples/> 
    -<test/> 
    -<tests/>

; 库依赖（标准库自动包含，无需添加Wire/SPI等）
; 如果需要外部库，在这里添加：
; lib_deps = 
;     author/库名@版本号

; 其他开发板配置（可选）
; [env:nano]
; platform = atmelavr
; board = nanoatmega328
; framework = arduino
; build_flags = ${env:uno.build_flags}
; upload_speed = 115200
; monitor_speed = 115200

; [env:mega]
; platform = atmelavr
; board = megaatmega2560
; framework = arduino
; build_flags = ${env:uno.build_flags}
; upload_speed = 115200
; monitor_speed = 115200
